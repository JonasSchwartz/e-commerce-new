{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jonas/OneDrive/Skrivbord/E-comm/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/jonas/OneDrive/Skrivbord/E-comm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/jonas/OneDrive/Skrivbord/E-comm/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useContext}from\"react\";import{Helmet}from\"react-helmet-async\";import{Store}from\"../Store\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import MessageBox from\"../components/MessageBox\";import ListGroup from\"react-bootstrap/ListGroup\";import{Link,useNavigate}from\"react-router-dom\";import Button from\"react-bootstrap/Button\";import Card from\"react-bootstrap/Card\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){var navigate=useNavigate();var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var updateCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(item,quantity){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/products/\".concat(item._id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.countInstock<quantity)){_context.next=7;break;}window.alert(\"Sorry. product is out of stock\");return _context.abrupt(\"return\");case 7:ctxDispatch({type:'CART_ADD_ITEM',payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 8:case\"end\":return _context.stop();}}},_callee);}));return function updateCartHandler(_x,_x2){return _ref.apply(this,arguments);};}();var removeItemHandler=function removeItemHandler(item){ctxDispatch({type:'CART_REMOVE_ITEM',payload:item});};var checkOutHandler=function checkOutHandler(){navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Kundvagn\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Kundvagn\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Kundvagnen \\xE4r tom. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Till Startsidan\"})]}):/*#__PURE__*/_jsx(ListGroup,{children:cartItems.map(function(item){return/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail\"}),\" \",\" \",/*#__PURE__*/_jsxs(Link,{to:\"/product/\".concat(item.slug),children:[\" \",item.name]})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity-1);},disabled:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),\" \",\" \",/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),\" \",/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity+1);},disabled:item.quantity===item.countInstock,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})}),\" \",\" \"]})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[\" \",item.price,\" Sek \",\" \",/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return removeItemHandler(item);},variant:\"light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash \"})})]})]},item._id);})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Totalt: (\",cartItems.reduce(function(a,c){return a+c.quantity;},0),' ',\"Produkter):\",cartItems.reduce(function(a,c){return a+c.price*c.quantity;},0),\" kr\"]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"primary\",onClick:checkOutHandler,disabled:cartItems.length===0,children:\"Till kassan\"})})})]})})})})]})]});}","map":{"version":3,"names":["useContext","Helmet","Store","Row","Col","MessageBox","ListGroup","Link","useNavigate","Button","Card","axios","CartScreen","navigate","state","ctxDispatch","dispatch","cartItems","cart","updateCartHandler","item","quantity","get","_id","data","countInstock","window","alert","type","payload","removeItemHandler","checkOutHandler","length","map","image","name","slug","price","reduce","a","c"],"sources":["C:/Users/jonas/OneDrive/Skrivbord/E-comm/frontend/src/screens/CartScreen.js"],"sourcesContent":["import { useContext } from \"react\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { Store } from \"../Store\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport MessageBox from \"../components/MessageBox\";\r\nimport ListGroup from \"react-bootstrap/ListGroup\"\r\nimport {Link,useNavigate} from \"react-router-dom\"\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport axios from \"axios\";\r\n\r\nexport default function CartScreen () {\r\n    const navigate = useNavigate()\r\n    const {state, dispatch: ctxDispatch} = useContext(Store);\r\n    const {\r\n        cart: {cartItems},\r\n    } = state;\r\n    \r\nconst updateCartHandler = async (item,quantity) => {\r\nconst { data } = await axios.get(`/api/products/${item._id}`);\r\nif (data.countInstock < quantity) {\r\n    window.alert(\"Sorry. product is out of stock\");\r\n    return;\r\n}\r\n\r\nctxDispatch({\r\n    type:'CART_ADD_ITEM',\r\n    payload: {...item,quantity},\r\n})\r\n\r\n}\r\n\r\nconst removeItemHandler = (item) => {\r\n    ctxDispatch( { type: 'CART_REMOVE_ITEM', payload: item});\r\n}\r\n\r\nconst checkOutHandler = () => {\r\n    navigate('/signin?redirect=/shipping')\r\n}\r\n\r\n    return (\r\n        <div>\r\n            <Helmet>\r\n                <title>Kundvagn</title>\r\n            </Helmet>\r\n            <h1>Kundvagn</h1>\r\n\r\n            <Row>\r\n                <Col md={8}>\r\n                    {cartItems.length === 0 ?(\r\n                    <MessageBox>\r\n                        Kundvagnen Ã¤r tom. <Link to=\"/\">Till Startsidan</Link>\r\n                    </MessageBox>\r\n                    ):\r\n                    (\r\n                        <ListGroup>\r\n                            {cartItems.map((item) => (\r\n                                <ListGroup.Item key={item._id}>\r\n                                    <Row className=\"align-items-center\">\r\n                                        <Col md={4}>\r\n                                            <img\r\n                                            src={item.image}\r\n                                            alt={item.name}\r\n                                            className=\"img-fluid rounded img-thumbnail\"\r\n                                            \r\n                                            ></img> {\" \"}\r\n                                            \r\n                                           <Link to={`/product/${item.slug}`}> {item.name}</Link>\r\n                                            \r\n                                        </Col>\r\n                                        <Col md={3}>\r\n                                        <Button variant=\"light\" \r\n                                        onClick={() => updateCartHandler(item, item.quantity -1)}\r\n                                        disabled={item.quantity === 1}>\r\n                                            <i className=\"fas fa-minus-circle\"></i>\r\n                                        </Button> {\" \"}\r\n                                        <span>{item.quantity}</span>{\" \"}\r\n                                        <Button variant=\"light\"\r\n                                            onClick={() => \r\n                                            updateCartHandler(item, item.quantity +1)}\r\n                                            disabled={item.quantity === item.countInstock}>\r\n                                            <i className=\"fas fa-plus-circle\"></i>\r\n                                        </Button> {\" \"}\r\n                                        </Col>\r\n                                    \r\n                                    \r\n                                    </Row>\r\n                                    <Col md={3}> {item.price} Sek {\" \"}\r\n                                       <Button \r\n                                            onClick={() => removeItemHandler(item)}\r\n                                            variant=\"light\" \r\n                                            >\r\n                                            <i className=\"fas fa-trash \"></i>\r\n                                        </Button> \r\n\r\n                                    </Col>\r\n                                 \r\n                                </ListGroup.Item>\r\n                            ))}\r\n                          </ListGroup>  \r\n                    )\r\n                 }\r\n                        \r\n                    \r\n                </Col>\r\n                <Col md={4}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <ListGroup variant=\"flush\">\r\n                                <ListGroup.Item>\r\n                                    <h4>Totalt:\r\n                           ({cartItems.reduce((a,c) => a+c.quantity, 0)}\r\n                            {' '}Produkter): \r\n                            {cartItems.reduce((a,c) => a+c.price * c.quantity, 0)} kr\r\n                                        </h4>\r\n                                </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                <div className=\"d-grid\">\r\n                                    <Button\r\n                                    type=\"button\"\r\n                                    variant=\"primary\"\r\n                                    onClick={checkOutHandler}\r\n                                    disabled={cartItems.length === 0}\r\n                                    >\r\n                                        Till kassan\r\n                                    </Button>\r\n                                </div>\r\n                            </ListGroup.Item>\r\n\r\n\r\n\r\n                            </ListGroup>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}