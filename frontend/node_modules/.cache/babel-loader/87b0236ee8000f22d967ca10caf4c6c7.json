{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jonas\\\\OneDrive\\\\Skrivbord\\\\E-comm\\\\frontend\\\\src\\\\screens\\\\ProductListScreen.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useContext, useEffect, useReducer } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useLocation } from \"react-router-dom\";\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport { Store } from '../Store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst reducer = (state, action) => {\n  switch (state.action) {\n    case 'FETCH_REQUEST':\n      return { ...state,\n        loading: true\n      };\n\n    case 'FETCH_SUCCESS':\n      return { ...state,\n        products: action.payload.products,\n        page: action.payload.page,\n        pages: action.payload.pages,\n        loading: false\n      };\n\n    case 'FETCH_FAIL':\n      return { ...state,\n        loading: false,\n        error: action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default function ProductListScreen() {\n  _s();\n\n  const [{\n    loading,\n    error,\n    products,\n    pages\n  }, dispatch] = useReducer(reducer, {\n    loading: true,\n    error: ''\n  });\n  const {\n    search,\n    pathname\n  } = useLocation();\n  const sp = new URLSearchParams(search);\n  const page = sp.get('page') || 1;\n  const {\n    state\n  } = useContext(Store);\n  const {\n    userInfo\n  } = state;\n  useEffect(() => {\n    const fethData = async () => {\n      try {\n        const {\n          data\n        } = await axios.get(`/api/products/admin?page=${page}`, {\n          headers: {\n            Authorization: `Bearer ${userInfo.token}`\n          }\n        });\n        dispatch({\n          type: 'FETCH_SUCCESS',\n          payload: data\n        });\n      } catch (err) {}\n    };\n\n    fethData();\n  }, [page, userInfo]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Produkter\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this), loading ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(MessageBox, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"id\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Namn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Pris\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Kategori\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"M\\xE4rke\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: products.map(product => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: product._id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: product.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: product.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: product.bran\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 21\n            }, this)]\n          }, product._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [...Array(pages).keys()].map(x => /*#__PURE__*/_jsxDEV(Link, {\n          className: x + 1 === Number(page) ? 'btn text-bold' : 'btn',\n          to: `/admin/products?page=${x + 1}`,\n          children: x + 1\n        }, x + 1, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 12\n  }, this);\n}\n\n_s(ProductListScreen, \"42O6aZ7PcN7HyKDL976XRZooIDE=\", false, function () {\n  return [useLocation];\n});\n\n_c = ProductListScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductListScreen\");","map":{"version":3,"names":["axios","React","useContext","useEffect","useReducer","Link","useLocation","LoadingBox","MessageBox","Store","reducer","state","action","loading","products","payload","page","pages","error","ProductListScreen","dispatch","search","pathname","sp","URLSearchParams","get","userInfo","fethData","data","headers","Authorization","token","type","err","map","product","_id","name","price","category","bran","Array","keys","x","Number"],"sources":["C:/Users/jonas/OneDrive/Skrivbord/E-comm/frontend/src/screens/ProductListScreen.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useContext, useEffect, useReducer } from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport {useLocation} from \"react-router-dom\"\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\nimport { Store } from '../Store';\r\n\r\n\r\nconst reducer = (state,action) => {\r\n    switch(state.action) {\r\n\r\n    \r\n    case 'FETCH_REQUEST':\r\n        return{...state,loading:true}\r\n\r\ncase 'FETCH_SUCCESS':\r\n    return{...state,\r\n    products:action.payload.products,\r\n    page: action.payload.page,\r\n    pages:action.payload.pages,\r\n    loading:false\r\n};\r\n    case 'FETCH_FAIL':\r\n        return {...state, loading: false, error: action.payload};\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport default function ProductListScreen() {\r\n   const [{loading,error,products,pages}, dispatch] = useReducer(reducer, {\r\n    loading: true,\r\n    error:'',\r\n    });\r\n\r\n    const {search, pathname} = useLocation();\r\n    const sp = new URLSearchParams(search);\r\n    const page = sp.get('page') || 1;\r\n\r\n    const {state} = useContext(Store)\r\n    const {userInfo} = state;\r\n\r\n\r\n    useEffect(() => {\r\n        const fethData = async () => {\r\n            try {\r\n                const { data } = await axios.get(`/api/products/admin?page=${page}`, {\r\n                   headers: {Authorization: `Bearer ${userInfo.token}`} \r\n                })\r\n\r\n                dispatch({type:'FETCH_SUCCESS', payload: data})\r\n            } catch (err){\r\n\r\n            }\r\n        }\r\n        fethData();\r\n    },[page, userInfo])\r\n  \r\n    return <div>\r\n\r\n        <h1>Produkter</h1>\r\n    {loading ? (\r\n        <LoadingBox></LoadingBox>\r\n    ): error ? (\r\n        <MessageBox variant=\"danger\">{error}</MessageBox>\r\n    ) : (\r\n        <>\r\n        <table className='table'>\r\n        <thead>\r\n            <tr>\r\n                <th>id</th>\r\n                <th>Namn</th>\r\n                <th>Pris</th>\r\n                <th>Kategori</th>\r\n                <th>MÃ¤rke</th>\r\n                \r\n            </tr>\r\n            </thead>\r\n        \r\n            <tbody>\r\n            {products.map((product) => (\r\n                <tr key={product._id}>\r\n                    <td>{product._id}</td>\r\n                    <td>{product.name}</td>\r\n                    <td>{product.price}</td>\r\n                    <td>{product.category}</td>\r\n                    <td>{product.bran}</td>\r\n                </tr>\r\n            ))}\r\n\r\n            </tbody>\r\n        </table>\r\n        <div>\r\n            {[...Array(pages).keys()].map((x) => (\r\n                <Link\r\n                className={x + 1 === Number(page) ? 'btn text-bold': 'btn'}\r\n                key={x + 1}\r\n                to={`/admin/products?page=${x + 1}`}\r\n                >\r\n                    {x + 1}\r\n\r\n                </Link>\r\n             ) )}\r\n\r\n\r\n        </div>\r\n        </>\r\n    ) }\r\n\r\n    </div>\r\n   }\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}