{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jonas\\\\OneDrive\\\\Skrivbord\\\\E-comm\\\\frontend\\\\src\\\\screens\\\\OrderHistoryScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useReducer } from 'react';\nimport { Helmet } from \"react-helmet-async\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\nimport { Store } from '../Store';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { getError } from '../utils';\nimport Button from \"react-bootstrap/Button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return { ...state,\n        loading: true\n      };\n\n    case 'FETCH_SUCCESS':\n      return { ...state,\n        orders: action.payload,\n        loading: false\n      };\n\n    case 'FETCH_FAIL':\n      return { ...state,\n        loading: false,\n        error: action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default function OrderHistoryScreen() {\n  _s();\n\n  const {\n    state\n  } = useContext(Store);\n  const {\n    userInfo\n  } = state;\n  const navigate = useNavigate();\n  const [{\n    loading,\n    error,\n    orders\n  }, dispatch] = useReducer(reducer, {\n    loading: true,\n    error: ''\n  });\n  useEffect(() => {\n    const fetchData = async () => {\n      dispatch({\n        type: 'FETCH_REQUEST'\n      });\n\n      try {\n        const {\n          data\n        } = await axios.get(`/api/orders/mine`, {\n          headers: {\n            Authorization: `Bearer ${userInfo.token}`\n          }\n        });\n        dispatch({\n          type: 'FETCH_SUCCESS',\n          payload: data\n        });\n      } catch (error) {\n        dispatch({\n          type: 'FETCH_FAIL',\n          payload: getError(error)\n        });\n      }\n    };\n\n    fetchData();\n  }, [userInfo]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Orderhistorik\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Orderhistorik\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }, this), loading ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(MessageBox, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table\",\n      children: /*#__PURE__*/_jsxDEV(\"tbod\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Datum\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Summa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Betald\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Levererad\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), orders.map(order => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: order._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: order.createdAt.substring(0, 10)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: order.totalPrice.toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: order.isPaid ? order.paidAt.substring(0, 10) : 'Nej'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: order.isDelivered ? order.isDelivered.substring(0, 10) : 'Nej'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"Button\",\n              variant: \"light\",\n              onClick: () => {\n                navigate(`/order/${order._id}`);\n              },\n              children: \"Detaljer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this)]\n        }, order._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n\n_s(OrderHistoryScreen, \"5TPnJawtIL1UULoG9QFxvDgYHfw=\", false, function () {\n  return [useNavigate];\n});\n\n_c = OrderHistoryScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderHistoryScreen\");","map":{"version":3,"names":["React","useContext","useEffect","useReducer","Helmet","LoadingBox","MessageBox","Store","useNavigate","axios","getError","Button","reducer","state","action","type","loading","orders","payload","error","OrderHistoryScreen","userInfo","navigate","dispatch","fetchData","data","get","headers","Authorization","token","map","order","_id","createdAt","substring","totalPrice","toFixed","isPaid","paidAt","isDelivered"],"sources":["C:/Users/jonas/OneDrive/Skrivbord/E-comm/frontend/src/screens/OrderHistoryScreen.js"],"sourcesContent":["import React, { useContext, useEffect, useReducer } from 'react'\r\nimport {Helmet} from \"react-helmet-async\"\r\nimport LoadingBox from \"../components/LoadingBox\"\r\nimport MessageBox from \"../components/MessageBox\"\r\nimport { Store } from '../Store'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios'\r\nimport { getError } from '../utils'\r\nimport Button from \"react-bootstrap/Button\"\r\n\r\n\r\n\r\nconst reducer = (state,action) => {\r\n    switch (action.type) {\r\n        case 'FETCH_REQUEST':\r\n            return {...state,loading: true};\r\n            case 'FETCH_SUCCESS':\r\n                return {...state,orders: action.payload, loading: false};\r\n                case 'FETCH_FAIL':\r\n                    return{...state,loading: false,error:action.payload};\r\n                    default:\r\n                        return state;\r\n    }\r\n};\r\n\r\nexport default function OrderHistoryScreen() {\r\n    const {state} = useContext(Store);\r\n    const {userInfo} = state\r\n    const navigate = useNavigate();\r\n\r\n\r\nconst [{loading, error, orders}, dispatch] = useReducer(reducer,{\r\n    loading: true,\r\n    error:'',\r\n});\r\nuseEffect(() => {\r\nconst fetchData = async () => {\r\n    dispatch({type:'FETCH_REQUEST'});\r\n    try {\r\n        const {data} = await axios.get(\r\n            `/api/orders/mine`,\r\n            {headers: {Authorization: `Bearer ${userInfo.token}`}}\r\n        );\r\n        dispatch({type:'FETCH_SUCCESS', payload: data});\r\n    } catch (error){\r\n        dispatch({\r\n            type:'FETCH_FAIL',\r\n            payload:getError(error)\r\n        });\r\n    }\r\n};\r\nfetchData();\r\n}, [userInfo]);\r\n\r\n  return (\r\n    <div>\r\n    <Helmet>    \r\n    \r\n    <title>Orderhistorik</title>\r\n    </Helmet>\r\n\r\n    <h1>Orderhistorik</h1>\r\n\r\n{loading ? (\r\n        <LoadingBox></LoadingBox>\r\n    ) : error ?(\r\n        <MessageBox variant=\"danger\">{error}</MessageBox>\r\n    ): (\r\n        <table className='table'>\r\n            <tbod>\r\n            <thead>\r\n                <tr>\r\n            <th>ID</th>\r\n            <th>Datum</th>\r\n            <th>Summa</th>\r\n            <th>Betald</th>\r\n            <th>Levererad</th>\r\n            <th>Actions</th>\r\n            </tr>\r\n            </thead>\r\n            \r\n                {orders.map((order)=>(\r\n                    <tr key={order._id}>\r\n                        <td>{order._id}</td>\r\n                        <td>{order.createdAt.substring(0,10)}</td>\r\n                        <td>{order.totalPrice.toFixed(2)}</td>\r\n                        <td>{order.isPaid ? order.paidAt.substring(0,10) : 'Nej'}</td>\r\n                        <td>{order.isDelivered ? order.isDelivered.substring(0,10): 'Nej'}\r\n                        </td>\r\n                        <td>\r\n                            <Button\r\n                                type='Button'\r\n                                variant=\"light\"\r\n                                onClick={() => {\r\n                                    navigate(`/order/${order._id}`)\r\n                                }}\r\n                            >\r\n                                Detaljer\r\n                            </Button>\r\n                        </td>\r\n                    </tr>\r\n                ))}\r\n            </tbod>\r\n        </table>\r\n    )}\r\n  \r\n\r\n    </div>\r\n  ) \r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}