{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jonas/OneDrive/Skrivbord/E-comm/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/jonas/OneDrive/Skrivbord/E-comm/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/jonas/OneDrive/Skrivbord/E-comm/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"C:/Users/jonas/OneDrive/Skrivbord/E-comm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useReducer,useState}from\"react\";import{Link}from\"react-router-dom\";import logger from\"use-reducer-logger\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import axios from'axios';import Product from\"../components/product\";import{Helmet}from\"react-helmet-async\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case\"FETCH_REQUEST\":return _objectSpread(_objectSpread({},state),{},{loading:true});case\"FETCH_SUCCESS\":return _objectSpread(_objectSpread({},state),{},{products:action.payload,loading:false});case\"FETCH_FAIL\":return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload});default:return state;}};function HomeScreen(){var _useReducer=useReducer(logger(reducer),{products:[],loading:true,error:\"\"}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],loading=_useReducer2$.loading,error=_useReducer2$.error,products=_useReducer2$.products,dispatch=_useReducer2[1];// const [products, setProducts] = useState([]);\nuseEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:\"FETCH_REQUEST\"});_context.prev=1;_context.next=4;return axios.get('/api/products');case 4:result=_context.sent;dispatch({type:\"FETCH_SUCCESS\",payload:result.data});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch({type:\"FETCH_FAIL\",payload:_context.t0.message});case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Jonas N\\xE4tbuik\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"nyheter-text\",children:\"Nyheter\"}),/*#__PURE__*/_jsx(\"div\",{className:\"products\",children:loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsx(Row,{children:products.map(function(product){return/*#__PURE__*/_jsx(Col,{sm:6,md:4,lg:3,className:\"mb-3  \",children:/*#__PURE__*/_jsx(Product,{product:product})},product.slug);})})})]});}export default HomeScreen;","map":{"version":3,"names":["useEffect","useReducer","useState","Link","logger","Row","Col","axios","Product","Helmet","LoadingBox","MessageBox","reducer","state","action","type","loading","products","payload","error","HomeScreen","dispatch","fetchData","get","result","data","message","map","product","slug"],"sources":["C:/Users/jonas/OneDrive/Skrivbord/E-comm/frontend/src/screens/HomeScreen.js"],"sourcesContent":["import { useEffect,useReducer, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport logger from \"use-reducer-logger\"\r\nimport Row from \"react-bootstrap/Row\"\r\nimport Col from \"react-bootstrap/Col\"\r\n\r\nimport axios from 'axios'\r\nimport Product from \"../components/product\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport LoadingBox from \"../components/LoadingBox\";\r\nimport MessageBox from \"../components/MessageBox\";\r\n\r\nconst reducer = (state,action) => {\r\n    switch(action.type) {\r\n        case `FETCH_REQUEST`:\r\n            return{...state,loading: true};\r\n         case `FETCH_SUCCESS`:\r\n            return  {...state,products:action.payload, loading: false};\r\n          case `FETCH_FAIL`:\r\n            return{...state,loading:false, error: action.payload};\r\n            default:   \r\n            return state;\r\n    }\r\n}\r\n\r\nfunction HomeScreen () {\r\n    const [{loading, error,products}, dispatch] = useReducer(logger(reducer), {\r\n        products:[],\r\n        loading: true,\r\n        error: ``,\r\n    })\r\n// const [products, setProducts] = useState([]);\r\nuseEffect(() => {\r\nconst fetchData = async () => {\r\n    dispatch({type: `FETCH_REQUEST`})\r\n    try {\r\n    const result = await axios.get('/api/products');\r\n    dispatch({type:`FETCH_SUCCESS`, payload: result.data})\r\n    } catch(err) {\r\n        dispatch({type: `FETCH_FAIL`, payload: err.message})\r\n    }   \r\n\r\n    \r\n\r\n    // setProducts(result.data);\r\n\r\n};\r\nfetchData();\r\n}, []);\r\n\r\n    return <div>\r\n        <Helmet>\r\n            <title>Jonas NÃ¤tbuik</title>\r\n        </Helmet>\r\n            <h1 className=\"nyheter-text\">Nyheter</h1>\r\n\r\n<div className=\"products\">\r\n{\r\n    loading? \r\n    ( <LoadingBox/>\r\n    ) :\r\n    error? ( \r\n        <MessageBox variant=\"danger\">{error}</MessageBox>\r\n    ): (\r\n        <Row>\r\n{products.map(product => (\r\n    <Col key={product.slug} sm={6} md={4} lg={3} className=\"mb-3  \">\r\n<Product  product={product}></Product>\r\n</Col>\r\n    ))}\r\n\r\n    </Row>\r\n)}\r\n\r\n</div>\r\n    </div>\r\n}\r\n\r\nexport default HomeScreen;"],"mappings":"2iBAAA,OAASA,SAAT,CAAmBC,UAAnB,CAA+BC,QAA/B,KAA+C,OAA/C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,OAAP,KAAmB,oBAAnB,CACA,MAAOC,IAAP,KAAgB,qBAAhB,CACA,MAAOC,IAAP,KAAgB,qBAAhB,CAEA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,QAAP,KAAoB,uBAApB,CACA,OAASC,MAAT,KAAuB,oBAAvB,CACA,MAAOC,WAAP,KAAuB,0BAAvB,CACA,MAAOC,WAAP,KAAuB,0BAAvB,C,wFAEA,GAAMC,QAAO,CAAG,QAAVA,QAAU,CAACC,KAAD,CAAOC,MAAP,CAAkB,CAC9B,OAAOA,MAAM,CAACC,IAAd,EACI,oBACI,sCAAUF,KAAV,MAAgBG,OAAO,CAAE,IAAzB,GACH,oBACG,sCAAYH,KAAZ,MAAkBI,QAAQ,CAACH,MAAM,CAACI,OAAlC,CAA2CF,OAAO,CAAE,KAApD,GACF,iBACE,sCAAUH,KAAV,MAAgBG,OAAO,CAAC,KAAxB,CAA+BG,KAAK,CAAEL,MAAM,CAACI,OAA7C,GACA,QACA,MAAOL,MAAP,CARR,CAUH,CAXD,CAaA,QAASO,WAAT,EAAuB,CACnB,gBAA8CnB,UAAU,CAACG,MAAM,CAACQ,OAAD,CAAP,CAAkB,CACtEK,QAAQ,CAAC,EAD6D,CAEtED,OAAO,CAAE,IAF6D,CAGtEG,KAAK,GAHiE,CAAlB,CAAxD,0EAAQH,OAAR,eAAQA,OAAR,CAAiBG,KAAjB,eAAiBA,KAAjB,CAAuBF,QAAvB,eAAuBA,QAAvB,CAAkCI,QAAlC,iBAKJ;AACArB,SAAS,CAAC,UAAM,CAChB,GAAMsB,UAAS,4FAAG,gJACdD,QAAQ,CAAC,CAACN,IAAI,gBAAL,CAAD,CAAR,CADc,sCAGOR,MAAK,CAACgB,GAAN,CAAU,eAAV,CAHP,QAGRC,MAHQ,eAIdH,QAAQ,CAAC,CAACN,IAAI,gBAAL,CAAuBG,OAAO,CAAEM,MAAM,CAACC,IAAvC,CAAD,CAAR,CAJc,+EAMVJ,QAAQ,CAAC,CAACN,IAAI,aAAL,CAAqBG,OAAO,CAAE,YAAIQ,OAAlC,CAAD,CAAR,CANU,oEAAH,kBAATJ,UAAS,0CAAf,CAcAA,SAAS,GACR,CAhBQ,CAgBN,EAhBM,CAAT,CAkBI,mBAAO,oCACH,KAAC,MAAD,wBACI,2CADJ,EADG,cAIC,WAAI,SAAS,CAAC,cAAd,qBAJD,cAMX,YAAK,SAAS,CAAC,UAAf,UAEIN,OAAO,cACL,KAAC,UAAD,IADK,CAGPG,KAAK,cACD,KAAC,UAAD,EAAY,OAAO,CAAC,QAApB,UAA8BA,KAA9B,EADC,cAGD,KAAC,GAAD,WACPF,QAAQ,CAACU,GAAT,CAAa,SAAAC,OAAO,qBACjB,KAAC,GAAD,EAAwB,EAAE,CAAE,CAA5B,CAA+B,EAAE,CAAE,CAAnC,CAAsC,EAAE,CAAE,CAA1C,CAA6C,SAAS,CAAC,QAAvD,uBACJ,KAAC,OAAD,EAAU,OAAO,CAAEA,OAAnB,EADI,EAAUA,OAAO,CAACC,IAAlB,CADiB,EAApB,CADO,EARR,EANW,GAAP,CA0BH,CAED,cAAeT,WAAf"},"metadata":{},"sourceType":"module"}